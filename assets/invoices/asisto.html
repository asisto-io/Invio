<!DOCTYPE html>
<html lang="{{locale}}">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>{{labels.invoiceTitle}} {{invoiceNumber}}</title>

  <style>
    * { box-sizing: border-box; font-family: Arial, Helvetica, sans-serif; }
    @page { size: A4; margin: 12mm; }
    body { margin: 0; padding: 0; background: #fff; color: #000; font-size: 13px; }
    .invoice-container { max-width: 190mm; margin: 0 auto; }

    .invoice-header { display: flex; justify-content: space-between; margin-bottom: 28px; }
    .logo img { max-height: 60px; }
    .company-details { text-align: right; font-size: 12px; line-height: 1.4; }

    .info-section { display: flex; justify-content: space-between; margin-bottom: 24px; }
    .bill-to, .invoice-details { width: 48%; }

    h3, h4 { margin: 0 0 8px 0; }

    table { width: 100%; border-collapse: collapse; margin-bottom: 24px; }
    th { text-align: left; border-bottom: 2px solid #000; padding-bottom: 6px; font-size: 12px; }
    td { padding: 6px 0; border-bottom: 1px solid #e5e7eb; font-size: 12px; }
    tfoot td { border-bottom: none; padding-top: 8px; }
    .label { text-align: right; padding-right: 8px; }

    .notes { font-size: 12px; margin-bottom: 24px; }
    .payment-info { font-size: 12px; margin-bottom: 32px; }
    .footer { text-align: center; font-size: 11px; color: #555; border-top: 1px solid #e5e7eb; padding-top: 14px; }

    .multiline {
      white-space: pre-line;
      word-break: break-word;
    }
  </style>
</head>

<body>
  <div class="invoice-container">

    <!-- Header -->
    <div class="invoice-header">
      <div class="logo">
        {{#logoUrl}}<img src="{{logoUrl}}" alt="{{companyName}}" />{{/logoUrl}}
      </div>

      <div class="company-details multiline">
        <strong>{{companyName}}</strong>
        {{#companyAddress}}
{{companyAddress}}
        {{/companyAddress}}
        {{#companyTaxId}}
{{labels.taxIdLabel}}: {{companyTaxId}}
        {{/companyTaxId}}
      </div>
    </div>

    <!-- Bill to + Invoice meta -->
    <div class="info-section">
      <div class="bill-to">
        <h3>{{labels.billToHeading}}</h3>
        <strong>{{customerName}}</strong>
        {{#customerAddress}}
        <div class="multiline">
{{customerAddress}}
        </div>
        {{/customerAddress}}
      </div>

      <div class="invoice-details">
        <h3>{{labels.invoiceTitle}}</h3>
        {{#invoiceNumber}}<div><strong>{{labels.invoiceNumberShortLabel}}:</strong> {{invoiceNumber}}</div>{{/invoiceNumber}}
        <div><strong>{{labels.invoiceDateLabel}}:</strong> {{issueDate}}</div>
        {{#dueDate}}<div><strong>{{labels.dueDateLabel}}:</strong> {{dueDate}}</div>{{/dueDate}}
      </div>
    </div>

    <!-- Items -->
    <table>
      <thead>
        <tr>
          <th style="width: 55%;">{{labels.itemHeaderDescription}}</th>
          <th style="width: 15%;">{{labels.itemHeaderQuantityShort}}</th>
          <th style="width: 15%;">{{labels.itemHeaderUnitPriceShort}}</th>
          <th style="width: 15%; text-align:right;">{{labels.itemHeaderAmount}}</th>
        </tr>
      </thead>
      <tbody>
        {{#items}}
        <tr>
          <td>{{description}}</td>
          <td>{{quantity}}</td>
          <td>{{unitPrice}}</td>
          <td style="text-align:right;">{{lineTotal}}</td>
        </tr>
        {{/items}}
      </tbody>
      <tfoot>
        <tr>
          <td colspan="3" class="label">{{labels.subtotalLabel}}</td>
          <td style="text-align:right;">{{subtotal}}</td>
        </tr>
        {{#hasTax}}
        <tr>
          <td colspan="3" class="label">{{labels.taxLabel}} ({{taxRate}}%)</td>
          <td style="text-align:right;">{{taxAmount}}</td>
        </tr>
        {{/hasTax}}
        <tr>
          <td colspan="3" class="label"><strong>{{labels.totalLabel}}</strong></td>
          <td style="text-align:right;"><strong>{{total}}</strong></td>
        </tr>
      </tfoot>
    </table>

    <!-- Notes (fixed text) -->
    <div class="notes">
      <p><em>{{notes}}</em></p>
    </div>

    <!-- Payment -->
    <div class="payment-info">
      <h4>{{labels.paymentInformationHeading}}</h4>

      {{#paymentCompanyName}}<div><strong>{{paymentCompanyName}}</strong></div>{{/paymentCompanyName}}

      {{#bankName}}<div><strong>{{labels.bankNameLabel}}:</strong> {{bankName}}</div>{{/bankName}}

      {{#bankAccount}}
      <div class="multiline">
{{bankAccount}}
      </div>
      {{/bankAccount}}

      {{#paymentTerms}}<div><strong>{{labels.paymentTermsLabel}}:</strong> {{paymentTerms}}</div>{{/paymentTerms}}
      {{#paymentMethods}}<div><strong>{{labels.paymentMethodsLabel}}:</strong> {{paymentMethods}}</div>{{/paymentMethods}}
    </div>

    <div class="footer">
      {{labels.footerThankYou}}
    </div>

  </div>
</body>
</html>
